generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db" // Path to your SQLite database file
}

model Restaurant {
  id              Int       @id @default(autoincrement())
  name            String    @unique
  averageRating   Float?    @default(0) // Can be computed dynamically in your app
  ratings         Rating[]
}

model Rating {
  id            Int       @id @default(autoincrement())
  value         Float
  source        String    // Replacing enum with a String field (e.g., "DoorDash", "Relish")
  reviewerId    Int
  reviewer      Reviewer  @relation(fields: [reviewerId], references: [id])
  restaurantId  Int
  restaurant    Restaurant @relation(fields: [restaurantId], references: [id])
  date          DateTime   @default(now())
}

model Reviewer {
  id                          Int       @id @default(autoincrement())
  name                        String
  favoriteRestaurantId        Int?      // Optional; references the restaurant with the highest rating
  leastFavoriteRestaurantId   Int?      // Optional; references the restaurant with the lowest rating
  favoriteRestaurant          Restaurant? @relation("Favorite", fields: [favoriteRestaurantId], references: [id])
  leastFavoriteRestaurant     Restaurant? @relation("LeastFavorite", fields: [leastFavoriteRestaurantId], references: [id])
  ratings                     Rating[]
}

